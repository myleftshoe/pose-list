{"version":3,"sources":["App.js","array.js","index.js"],"names":["generateItems","length","Object","toConsumableArray","Array","keys","map","k","concat","actions","reverse","_ref","arr","items","slice","shuffle","_ref2","a","Math","random","sort","b","move","oldIndex","newIndex","_ref3","removeFrom","arguments","undefined","insertAt","isNaN","Number","_arr","item","splice","state","lastId","_ref4","_this","setState","onDrag","e","console","log","touches","_e$touches$","x","clientX","y","clientY","id","document","elementFromPoint","getAttribute","includes","index","findIndex","_id","this","react_default","createElement","className","onClick","Draggable","onTouchMove","react_pose_es","Item","key","style","opacity","Component","posed","li","draggable","PureComponent","ReactDOM","render","src_App_default","getElementById"],"mappings":"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","file":"static/js/main.3d97eb01.chunk.js","sourcesContent":["import React, { Component, PureComponent } from 'react';\r\nimport './App.css';\r\nimport posed, { PoseGroup } from 'react-pose';\r\nimport { move, shuffle, reverse } from './array';\r\n\r\nconst generateItems = length => [...Array(length).keys()].map(k => `Item ${k}`)\r\n\r\nconst actions = {\r\n  reverse: ({items}) => ({items: reverse(items)}),\r\n  shuffle: ({items}) => ({items: shuffle(items)}),\r\n  move: (oldIndex, newIndex) => ({items}) => ({items: move(items, oldIndex, newIndex)}),\r\n}\r\n\r\nexport default class extends Component {\r\n\r\n  state = { items: generateItems(20) }\r\n  \r\n  lastId = 'Item 0'; \r\n  move = ({oldIndex, newIndex}) => this.setState(actions.move(oldIndex, newIndex));\r\n  reverse = () => this.setState(actions.reverse);\r\n  shuffle = () => this.setState(actions.shuffle);\r\n  onDrag = (e) => {\r\n    console.log(e.touches[0]);\r\n    const { clientX: x, clientY: y } = e.touches[0];\r\n    console.log(x,y);\r\n    const el = document.elementFromPoint(x, y);\r\n    const id = el.getAttribute(\"id\");\r\n    if (id && id.includes(\"Item\") && this.lastId !== id) {\r\n      const index = this.state.items.findIndex(_id => _id === id);\r\n      console.log(id, index);\r\n      this.move({oldIndex: index - 1, newIndex: index});\r\n      this.lastId = 'Item 0';\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { items } = this.state;\r\n    return (\r\n      <div className=\"App\" >\r\n        <button onClick={this.reverse}>Reverse</button>\r\n        <button onClick={this.shuffle}>Shuffle</button>\r\n        <Draggable onTouchMove={this.onDrag}/>\r\n        <PoseGroup>\r\n          {items.map((id, index) => <Item key={id} style={{ opacity: (id===\"Item 0\") && 0}} id={id} index={index}>{id}</Item>)}\r\n        </PoseGroup>          \r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst Item = posed.li();\r\nconst Draggable = posed.li({draggable: true});\r\n\r\n// FlipMove requires class compoonents as children\r\nclass ListItem extends PureComponent {\r\n  render() {\r\n    const { children } = this.props;\r\n    return <div className=\"list-item\" >{children}</div>\r\n  }\r\n}\r\n","export const move = (arr, removeFrom=null, insertAt=null) => {\r\n    /*\r\n        Adds item if removeFrom is null\r\n        Removes item if insertAt is null\r\n    */\r\n    if (insertAt === removeFrom) return arr;\r\n    if (isNaN(Number(removeFrom) || isNaN(Number(insertAt)))) return arr;\r\n\r\n    let _arr = [...arr];\r\n\r\n    const item = (removeFrom !== null) ? _arr.splice(removeFrom, 1)[0] : null; \r\n    if (insertAt !== null) {\r\n        _arr.splice(insertAt, 0, item);\r\n    }\r\n\r\n    return _arr;\r\n  };\r\n    \r\nexport const shuffle = arr => arr\r\n    .map(a => [Math.random(), a])\r\n    .sort((a, b) => a[0] - b[0])\r\n    .map(a => a[1]);\r\n\r\nexport const reverse = arr => arr.slice().reverse();","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}